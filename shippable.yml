resources:
  - name: shipit_repo
    type: gitRepo
    integration: avinci_gh
    pointer:
      sourceName: shippable/shipit
      branch: master

  - name: shipit_gh_ssh
    type: integration
    integration: avi_gh_ssh

  - name: shipit_dh_cli
    type: cliConfig
    integration: ric03uec-dockerhub

jobs:
  ### Tagging u16 services
  - name: dry_dh_x86_64_Ubuntu_tag_push
    type: runSh
    triggerMode: parallel
    dependencyMode: strict
    steps:
      - IN: shipit_repo
        switch: off
      - IN: shipit_dh_cli
        switch: off
      - IN: shipit_gh_ssh
        switch: off
      - IN: u16_img
        switch: off
      - IN: u16_repo
        switch: off
      - IN: u16all_img
        switch: off
      - IN: u16all_repo
        switch: off
      - IN: u16nodall_img
        switch: off
      - IN: u16nodall_repo
        switch: off
      - IN: u16pytall_img
        switch: off
      - IN: u16pytall_repo
        switch: off
      - IN: u16cloall_img
        switch: off
      - IN: u16cloall_repo
        switch: off
      - IN: u16golall_img
        switch: off
      - IN: u16golall_repo
        switch: off
      - IN: u16javall_img
        switch: off
      - IN: u16javall_repo
        switch: off
      - IN: u16scaall_img
        switch: off
      - IN: u16scaall_repo
        switch: off
      - IN: u16ruball_img
        switch: off
      - IN: u16ruball_repo
        switch: off
      - IN: u16phpall_img
        switch: off
      - IN: u16phpall_repo
        switch: off
      - IN: u16cppall_img
        switch: off
      - IN: u16cppall_repo
        switch: off
      - IN: u14_img
        switch: off
      - IN: u14_repo
        switch: off
      - IN: u14all_img
        switch: off
      - IN: u14all_repo
        switch: off
      - IN: u14nodall_img
        switch: off
      - IN: u14nodall_repo
        switch: off
      - IN: u14pytall_img
        switch: off
      - IN: u14pytall_repo
        switch: off
      - IN: u14cloall_img
        switch: off
      - IN: u14cloall_repo
        switch: off
      - IN: u14golall_img
        switch: off
      - IN: u14golall_repo
        switch: off
      - IN: u14javall_img
        switch: off
      - IN: u14javall_repo
        switch: off
      - IN: u14scaall_img
        switch: off
      - IN: u14scaall_repo
        switch: off
      - IN: u14ruball_img
        switch: off
      - IN: u14ruball_repo
        switch: off
      - IN: u14phpall_img
        switch: off
      - IN: u14phpall_repo
        switch: off
      - IN: u14cppall_img
        switch: off
      - IN: u14cppall_repo
        switch: off
      - IN: rel_prod
      - TASK:
        - script: |
            pushd $(shipctl get_resource_state "shipit_repo")
              ./tagAndPushSvcs.sh drydock dry-dock dhDrydock.txt dry_dh_x86_64_Ubuntu_tag_push
            popd

  - name: ship_dh_x86_64_Ubuntu_tag_push
    type: runSh
    triggerMode: parallel
    dependencyMode: strict
    steps:
      - IN: x86_64_Ubuntu_14_04_prep_repo
        switch: off
      - IN: shipit_dh_cli
        switch: off
      - IN: shipit_gh_ssh
        switch: off
      - IN: microbase_img
        switch: off
      - IN: microbase_repo
        switch: off
      - IN: rel_prod
      - TASK:
        - script: |
            pushd $(shipctl get_resource_state "shipit_repo")
              ./tagAndPushSvcs.sh drydock shippable dhShippable.txt dry_dh_x86_64_Ubuntu_tag_push
            popd